<div id="user-content-box" class="col-md-12">
  <h2 class="col-md-12"><span id="wel-name">Welcome, </span><span id="username"><%=@user.name%></span></h2>
  <%= link_to edit_user_path @user do %>
  <div class="col-md-12"><%=image_tag(@user.avatar)%></div>
  <%end%>
  <h3 class="col-md-12">
    <% courses = @user.completions.map {|x| Challenge.find(x.completed_id).course} %>
    <% courses.uniq.each do |course|%>
      <h2><%=link_to course.name, course%></h2>
      <% comp = @user.completions.map {|com| Course.where(course_id: com.completed.course_id)} %>
      <progress value='<%= comp.length%>' max='<%=course.challenges.length%>'> </progress>
    <%end%>
  </h3>
  <div id="complt-box">
    <% if @user.completions.length > 0 %>
      <ul class="col-md-12">
      <!-- Completed: -->
      <% @user.completions.each do |comp| %>
        <% @challenge = Challenge.find(comp.completed_id) %>
        <li class="challenge"><%=link_to(@challenge.title, course_challenge_path(@challenge.course,@challenge), :class => "challenge")%></li>
      <%end%>
  </div>
  <div id="tocomplt-box">
        <!-- To Complete: -->
        <% Challenge.all.each do |chal| %>
          <% if !Completion.exists?(completer_id:current_user.id, completed_id: chal.id) %>
            <%=link_to(chal.title, [chal.course,chal], :class => "incomplete")%>
          <%end%>
        <%end%>
        </ul>
      <% else %>
       <!--  To Complete: -->
        <% Challenge.all.each do |chal| %>
          <% if !Completion.exists?(completer_id:current_user.id, completed_id: chal.id) %>
            <%=link_to(chal.title, [chal.course,chal], :class => "incomplete")%>
          <%end%>
        <%end%>
      <%end%>
      <%=link_to("Take a class!",courses_path)%>
  </div>
</div>
